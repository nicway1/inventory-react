{% set style = config.get('style', 'photo') if config else 'photo' %}
{% set data = widget_data.get('bug_reports', {}) %}

{% if style == 'photo' %}
<!-- Photo Style - AI Generated Image -->
<a href="{{ url_for('feedback.my_reports') }}" style="display: block; text-decoration: none; height: 100%; min-height: 180px; position: relative; border-radius: 12px; overflow: hidden; background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);">
    <img src="{{ url_for('static', filename='images/widgets/report_issue.png') }}" alt="Report an Issue" style="width: 100%; height: 100%; object-fit: cover; position: absolute; inset: 0;" onerror="this.style.display='none'">
    <div style="position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0) 100%);"></div>
    <div style="position: absolute; bottom: 0; left: 0; right: 0; padding: 1rem; color: white;">
        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">
            <i class="fas fa-bug" style="font-size: 1.25rem;"></i>
            <span style="font-size: 1rem; font-weight: 600;">Report an Issue</span>
        </div>
        <div style="font-size: 0.75rem; opacity: 0.9;">
            {% if data.get('open_count', 0) > 0 %}
                {{ data.get('open_count', 0) }} open report{{ 's' if data.get('open_count', 0) != 1 else '' }}
            {% else %}
                Submit bugs & feedback
            {% endif %}
        </div>
    </div>
</a>
{% else %}
<!-- Classic Style - Button -->
<div style="text-align: center;">
    <div style="width: 56px; height: 56px; border-radius: 14px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.75rem; background: var(--gradient-red);">
        <i class="fas fa-bug" style="color: white; font-size: 1.5rem;"></i>
    </div>
    <div style="font-size: 0.875rem; font-weight: 600; color: var(--sf-gray-800); margin-bottom: 0.25rem;">Report an Issue</div>
    <div style="font-size: 0.75rem; color: var(--sf-gray-500); margin-bottom: 1rem;">
        {% if data.get('open_count', 0) > 0 %}
            <span style="color: var(--sf-orange);">{{ data.get('open_count', 0) }} open</span> &bull; {{ data.get('total_count', 0) }} total
        {% else %}
            Submit bugs & feedback
        {% endif %}
    </div>
    <div style="display: flex; gap: 0.5rem; justify-content: center;">
        <a href="{{ url_for('feedback.report_bug') }}" style="display: inline-flex; align-items: center; gap: 0.375rem; padding: 0.5rem 1rem; background: var(--sf-red); color: white; border-radius: 0.375rem; font-size: 0.8125rem; font-weight: 600; text-decoration: none;">
            <i class="fas fa-plus"></i> New Report
        </a>
        <a href="{{ url_for('feedback.my_reports') }}" style="display: inline-flex; align-items: center; gap: 0.375rem; padding: 0.5rem 0.75rem; background: var(--sf-gray-200); color: var(--sf-gray-700); border-radius: 0.375rem; font-size: 0.8125rem; font-weight: 600; text-decoration: none;">
            <i class="fas fa-list"></i>
        </a>
    </div>
</div>
{% endif %}
